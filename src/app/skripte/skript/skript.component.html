



<div class="ui-g">
  <label class="ui-g-3">Skript laden</label>
  <p-dropdown [options]="skriptSelect" class="ui-g-9" placeholder="..." (onChange)="onSkriptSelect($event)"></p-dropdown>
</div>
<div class="ui-g">
  <label for="name" class="ui-g-3">Name</label>
  <input class="ui-g-9" pInputText id="name" type="text" [(ngModel)]="current.name">
</div>
<div class="ui-g">
  <label class="ui-g-3">Helper</label>
  <p-multiSelect class="ui-g-9" [options]="helperSelect" [(ngModel)]="current.scriptHelper" [panelStyle]="{minWidth:'12em'}" [filter]="false">
  </p-multiSelect>
</div>
<div class="ui-g">
  <p-dropdown [options]="typesSelect" [(ngModel)]="selectedType" class="ui-g-9" placeholder="...">
    <ng-template let-data pTemplate="item">
        <div pTooltip="{{data.value.description}}">{{data.label}}</div>
    </ng-template>
  </p-dropdown>
  <button pButton label="HinzufÃ¼gen" (click)="addVariable()"></button>
</div>

<div class="ui-g" *ngFor="let variable of current.scriptVariables;let i=index">
  <div class="ui-g-3">
    {{variable.type}}
  </div>
  <div class="ui-g-3">
    <input type="text" pInputText [(ngModel)]="variable.name">
  </div>
  <div class="ui-g-3" *ngIf="valuesFor(variable);else freeText">
    <p-dropdown [options]="valuesFor(variable)" [(ngModel)]="variable.value" placeholder="...">
    </p-dropdown>
  </div>
  <div class="ui-g-3">
    <button pButton icon="pi pi-trash" (click)="deleteVariable(i)"></button>
  </div>
  <ng-template #freeText>
    <div class="ui-g-3">
      <input type="text" pInputText [(ngModel)]="variable.value">
    </div>

  </ng-template>
</div>
<span >function calculate(params) {{'{'}}</span>
<textarea rows="10" autoResize="true" cols="50" style="width:100%" pInputTextarea [(ngModel)]="current.body"></textarea>
<span>{{'}'}}</span>

<div class="ui-g">
  <button pButton label="Testlauf" (click)="testrun()"></button>
  <button pButton label="Save" (click)="save()"></button>
</div>

<ng-container *ngIf="testResult">
  <div class="ui-g">Logs</div>
  <p-table [value]="testResult.logs">
    <ng-template pTemplate="header">
      <tr>
        <th>Log-Level</th>
        <th>Text</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-data>
      <tr>
        <td>{{data.level}}</td>
        <td>{{data.value }}</td>
      </tr>
    </ng-template>
  </p-table>
  <div class="ui-g">{{testResult.result}}</div>
</ng-container>
