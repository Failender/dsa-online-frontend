<ng-container *ngIf="abenteuer; else loading">
  <div class="ui-g">
    <button pButton label="Abenteuerlog" (click)="back()"></button>
    <button pButton label="Kampagnen-Ansicht" (click)="backToKampagne()"></button>
    <button pButton label="Im Kalender ansehen" (click)="viewInCalendar()"></button>
    <button pButton label="Abenteuer erstellen" (click)="backToCreate()" *ngIf="  abenteuer.meister"></button>

  </div>
  <div class="ui-g">
    <div class="ui-g-12" style="text-align: center; font-size: 2em"><b>Name: {{abenteuer.name}}</b></div>
  </div>
  <div class="ui-g" *ngIf="abenteuer.meister">
    <button pButton label="SE hinzufügen" (click)="addSeGruppeid = abenteuer.gruppeId"></button>
    <button pButton label="AP hinzufügen" (click)="addApGruppeid = abenteuer.gruppeId"></button>
  </div>

  <p-card class="ui-sm-6 ui-md-6 ui-g-4" title="Gruppe" styleClass="abenteuer-held-card-header" *ngIf="abenteuer.bonusAll.ap !== 0 || abenteuer.bonusAll.ses.length !== 0">
    <p-header><div class="card-header">
      <i class="pi pi-times" (click)="removeGruppe()" *ngIf="abenteuer.meister"></i>
    </div></p-header>
    <div class="ui-g" *ngIf="abenteuer.bonusAll.ap !== 0">
      Abenteuerpunkte: {{abenteuer.bonusAll.ap}} <i class="pi pi-times delete-icon" (click)="deleteAp('gruppe')" *ngIf="abenteuer.meister"></i>
    </div>
    <div class="ui-g" *ngFor="let se of abenteuer.bonusAll.ses">{{se}} <i class="pi pi-times delete-icon" (click)="deleteSe('gruppe', se)" *ngIf="abenteuer.meister"></i></div>
  </p-card>

  <p-card *ngFor="let bonus of abenteuer.bonus" [title]="bonus.name" class=" ui-sm-6 ui-md-6 ui-g-4" styleClass="abenteuer-held-card-header">
    <p-header><div class="card-header">
      <i class="pi pi-times" (click)="removeHeld(bonus)" *ngIf="abenteuer.meister"></i>
    </div></p-header>
    <div class="ui-g" *ngIf="bonus.bonus.ap !== 0">Bonus-AP: {{bonus.bonus.ap}} <i class="pi pi-times delete-icon" (click)="deleteAp(bonus.name)" *ngIf="abenteuer.meister"></i></div>
    <div class="ui-g" *ngFor="let se of bonus.bonus.ses">{{se}}<i class="pi pi-times delete-icon" (click)="deleteSe(bonus.name, se)" *ngIf="abenteuer.meister"></i></div>
  </p-card>


</ng-container>
<ng-template #loading>
  <div class="loader"></div>
</ng-template>


<app-add-se-bonus-dialog *ngIf="abenteuer" [abenteuer]="abenteuer.id" [gruppeid]="addSeGruppeid" (onClose)="onAddSeDialogClose($event)"></app-add-se-bonus-dialog>
<app-add-ap-bonus-dialog *ngIf="abenteuer" [abenteuer]="abenteuer.id" [gruppeid]="addApGruppeid" (onClose)="onAddApDialogClose($event)"></app-add-ap-bonus-dialog>
